function init(){map=new google.maps.Map(document.getElementById("map-holder"),{center:{lat:53.5547142,lng:9.9689018},zoom:16}),map.data.setControls(["Point","LineString","Polygon"]),map.data.setStyle({editable:!0,draggable:!0}),bindDataLayerListeners(map.data),dropContainer=document.getElementById("drop-container"),panel=document.getElementById("panel");var e=document.getElementById("map-holder");geoJsonInput=document.getElementById("geojson-input"),downloadLink=document.getElementById("download-link"),resizeGeoJsonInput(),[e,dropContainer].forEach(function(e){google.maps.event.addDomListener(e,"drop",handleDrop),google.maps.event.addDomListener(e,"dragover",showPanel)}),google.maps.event.addDomListener(e,"dragstart",showPanel),google.maps.event.addDomListener(e,"dragenter",showPanel),google.maps.event.addDomListener(dropContainer,"dragend",hidePanel),google.maps.event.addDomListener(dropContainer,"dragleave",hidePanel),google.maps.event.addDomListener(geoJsonInput,"input",refreshDataFromGeoJson),google.maps.event.addDomListener(geoJsonInput,"input",refreshDownloadLinkFromGeoJson),google.maps.event.addDomListener(window,"resize",resizeGeoJsonInput)}function refreshGeoJsonFromData(){map.data.toGeoJson(function(e){geoJsonInput.value=JSON.stringify(e,null,2),refreshDownloadLinkFromGeoJson()})}function refreshDataFromGeoJson(){var e=new google.maps.Data({map:map,style:map.data.getStyle(),controls:["Point","LineString","Polygon"]});try{var n=JSON.parse(geoJsonInput.value);e.addGeoJson(n)}catch(o){return e.setMap(null),void setGeoJsonValidity(""!==geoJsonInput.value?!1:!0)}map.data.setMap(null),map.data=e,bindDataLayerListeners(e),setGeoJsonValidity(!0)}function refreshDownloadLinkFromGeoJson(){downloadLink.href="data:;base64,"+btoa(geoJsonInput.value)}function bindDataLayerListeners(e){e.addListener("addfeature",refreshGeoJsonFromData),e.addListener("removefeature",refreshGeoJsonFromData),e.addListener("setgeometry",refreshGeoJsonFromData)}function setGeoJsonValidity(e){e?geoJsonInput.className="":geoJsonInput.className="invalid"}function openNav(){document.getElementById("mySidenav").style.width="300px",document.getElementById("main").style.marginLeft="300px"}function closeNav(){document.getElementById("mySidenav").style.width="0",document.getElementById("main").style.marginLeft="0"}var map,dropContainer,panel,geoJsonInput,downloadLink;google.maps.event.addDomListener(window,"load",init),window.onbeforeunload=function(){return"Are you sure you want to leave?"};
